<story-context id=".bmad/bmm/workflows/4-implementation/story-context/template" v="1.0">
  <metadata>
    <epicId>10</epicId>
    <storyId>10.4</storyId>
    <title>Implement Structured Error Handling with Clear Messages</title>
    <status>drafted</status>
    <generatedAt>2025-11-15</generatedAt>
    <generator>BMAD Story Context Workflow (Batch)</generator>
    <sourceStoryPath>docs/sprint-artifacts/stories/10-4-implement-structured-error-handling-with-clear-messages.md</sourceStoryPath>
  </metadata>

  <story>
    <asA>developer</asA>
    <iWant>actionable error messages (not stack traces)</iWant>
    <soThat>I can fix issues quickly</soThat>
    <tasks>
      Task 1 (AC: #1)
      - Task 2 (AC: #2)
    </tasks>
  </story>

  <acceptanceCriteria>
    1. Given** execution fails
    2. When** CLI displays error
    3. Then** shows clear, actionable message:
  </acceptanceCriteria>

  <artifacts>
    <docs>
      <doc>
        <path>docs/architecture.md</path>
        <title>RGrid Architecture Document</title>
        <section>Relevant architecture decisions</section>
        <snippet>See architecture.md for system design, component architecture, and technical constraints relevant to this story.</snippet>
      </doc>
      <doc>
        <path>docs/sprint-artifacts/tech-spec-epic-10.md</path>
        <title>Epic 10 Technical Specification</title>
        <section>Technical details for Epic 10</section>
        <snippet>See tech spec for detailed service breakdown, data models, APIs, and acceptance criteria specific to this epic.</snippet>
      </doc>
      <doc>
        <path>docs/epics.md</path>
        <title>RGrid Epic Breakdown</title>
        <section>Story 10.4</section>
        <snippet>See epics.md for complete story definition, prerequisites, and technical notes.</snippet>
      </doc>
    </docs>
    <code>
      <!-- Greenfield project - No existing code for Epic 10 stories -->
    </code>
    <dependencies>
      <python>
        <planned>
          <!-- See tech-spec-epic-10.md for dependency details -->
        </planned>
      </python>
    </dependencies>
  </artifacts>

  <constraints>
    - Follow architecture.md LLM-agent-friendly patterns
    - File size limit: Single file MUST NOT exceed 500 lines
    - All costs stored as BIGINT micros (1 EUR = 1,000,000 microns)
    - Python 3.11+ minimum
    - TDD approach: Write tests BEFORE implementation
    - 80% test coverage minimum
  </constraints>

  <interfaces>
    <!-- See story file and tech spec for interface details -->
  </interfaces>

  <tests>
    <standards>
      TDD approach per architecture.md: Write tests BEFORE implementation. Target 80% coverage minimum. Use pytest + pytest-asyncio. Test pyramid: 60% unit tests, 30% service tests, 10% integration tests.
    </standards>
    <locations>
      - tests/unit/ - Unit tests
      - tests/integration/ - Integration tests
      - Component-specific tests/ subdirectories
    </locations>
    <ideas>
      <!-- See story file Dev Notes for testing guidance -->
    </ideas>
  </tests>
</story-context>
